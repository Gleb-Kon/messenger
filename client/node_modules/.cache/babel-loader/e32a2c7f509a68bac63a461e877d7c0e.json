{"ast":null,"code":"import axios from 'axios';\nimport { AUTH_SUCCESS } from './actionTypes';\nexport function auth(email, password, isLogin) {\n  return async dispatch => {\n    const authData = {\n      email,\n      password\n    };\n    let url = 'http://localhost:8888/registration';\n\n    if (isLogin) {\n      console.log(\"isLogin\");\n      url = 'http://localhost:8888/';\n    }\n\n    let body = JSON.stringify(authData);\n    axios({\n      method: 'post',\n      url: url,\n      data: body\n    }).then(response => {\n      console.log(response);\n      localStorage.setItem('userId', response.data.userId);\n      localStorage.setItem('email', response.data.email);\n      localStorage.setItem('token', response.data.token);\n      dispatch(authSuccess(response.data.token));\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n}\nexport function authSuccess(token) {\n  return {\n    type: AUTH_SUCCESS\n  };\n}","map":{"version":3,"sources":["/home/gleban/WORKS/messnger_project/client/src/store/actions/auth.js"],"names":["axios","AUTH_SUCCESS","auth","email","password","isLogin","dispatch","authData","url","console","log","body","JSON","stringify","method","data","then","response","localStorage","setItem","userId","token","authSuccess","catch","error","type"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,eAA7B;AAEA,OAAO,SAASC,IAAT,CAAcC,KAAd,EAAqBC,QAArB,EAA+BC,OAA/B,EAAwC;AAC3C,SAAO,MAAMC,QAAN,IAAkB;AACrB,UAAMC,QAAQ,GAAG;AACbJ,MAAAA,KADa;AACNC,MAAAA;AADM,KAAjB;AAIJ,QAAII,GAAG,GAAG,oCAAV;;AAEA,QAAGH,OAAH,EAAY;AACRI,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AAEAF,MAAAA,GAAG,GAAG,wBAAN;AACH;;AAED,QAAIG,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeN,QAAf,CAAX;AAEAP,IAAAA,KAAK,CAAC;AACJc,MAAAA,MAAM,EAAE,MADJ;AAEJN,MAAAA,GAAG,EAAEA,GAFD;AAGJO,MAAAA,IAAI,EAAEJ;AAHF,KAAD,CAAL,CAIGK,IAJH,CAISC,QAAD,IAAc;AAClBR,MAAAA,OAAO,CAACC,GAAR,CAAYO,QAAZ;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BF,QAAQ,CAACF,IAAT,CAAcK,MAA7C;AACAF,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACF,IAAT,CAAcZ,KAA5C;AACAe,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,QAAQ,CAACF,IAAT,CAAcM,KAA5C;AAEAf,MAAAA,QAAQ,CAACgB,WAAW,CAACL,QAAQ,CAACF,IAAT,CAAcM,KAAf,CAAZ,CAAR;AACH,KAXD,EAYCE,KAZD,CAYO,UAAUC,KAAV,EAAiB;AACpBf,MAAAA,OAAO,CAACC,GAAR,CAAYc,KAAZ;AACH,KAdD;AAeD,GA9BC;AA+BH;AAED,OAAO,SAASF,WAAT,CAAqBD,KAArB,EAA4B;AAC/B,SAAO;AACHI,IAAAA,IAAI,EAAExB;AADH,GAAP;AAGH","sourcesContent":["import axios from 'axios'\nimport { AUTH_SUCCESS } from './actionTypes'\n\nexport function auth(email, password, isLogin) {\n    return async dispatch => {\n        const authData = {\n            email, password\n        }\n\n    let url = 'http://localhost:8888/registration'\n\n    if(isLogin) {\n        console.log(\"isLogin\")\n\n        url = 'http://localhost:8888/'\n    }\n    \n    let body = JSON.stringify(authData);\n    \n    axios({\n      method: 'post',\n      url: url,\n      data: body,\n    }).then((response) => {\n        console.log(response);\n        localStorage.setItem('userId', response.data.userId)\n        localStorage.setItem('email', response.data.email)\n        localStorage.setItem('token', response.data.token)\n\n        dispatch(authSuccess(response.data.token))\n    })\n    .catch(function (error) {\n        console.log(error);\n    });\n  }\n}\n\nexport function authSuccess(token) {\n    return {\n        type: AUTH_SUCCESS\n    }\n}"]},"metadata":{},"sourceType":"module"}